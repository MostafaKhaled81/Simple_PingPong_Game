/*
 * Ping_pong.c
 *
 * Created: 8/30/2023 1:59:50 AM
 *  Author: mk591
 */ 
/***********************************************************************************************************************
 *  FILE DESCRIPTION
 *  -----------------------------------------------------------------------------------------------------------------*/
/**        \file  FileName.c
 *        \brief  
 *
 *      \details  
 *
 *
 *********************************************************************************************************************/

/**********************************************************************************************************************
 *  INCLUDES
 *********************************************************************************************************************/
#include "Ping_pong.h"

/**********************************************************************************************************************
*  LOCAL MACROS CONSTANT\FUNCTION
*********************************************************************************************************************/

/**********************************************************************************************************************
 *  LOCAL DATA 
 *********************************************************************************************************************/

/**********************************************************************************************************************
 *  GLOBAL DATA
 *********************************************************************************************************************/

/**********************************************************************************************************************
 *  LOCAL FUNCTION PROTOTYPES
 *********************************************************************************************************************/

/**********************************************************************************************************************
 *  LOCAL FUNCTIONS
 *********************************************************************************************************************/

/**********************************************************************************************************************
 *  GLOBAL FUNCTIONS
 *********************************************************************************************************************/


/******************************************************************************
* \Syntax          : void PingPong_Init(void)      
* \Description     : Describe this service                                    
*                                                                             
* \Sync\Async      : Synchronous                                               
* \Reentrancy      : Non Reentrant                                             
* \Parameters (in) : parameterName   Parameter Describtion                     
* \Parameters (out): None                                                      
* \Return value:   : Std_ReturnType  E_OK
*                                    E_NOT_OK                                  
*******************************************************************************/
void PingPong_Init(void)
{
	PORT_INIT();
	LCD_Init();
	LCD_Custom_char();
	LCD_GOTO(0,0);
	LCD_WriteChar(0);
	LCD_GOTO(0,15);
	LCD_WriteChar(1);
}
/******************************************************************************
* \Syntax          : void PingPong_Init(void)
* \Description     : Describe this service
*
* \Sync\Async      : Synchronous
* \Reentrancy      : Non Reentrant
* \Parameters (in) : parameterName   Parameter Describtion
* \Parameters (out): None
* \Return value:   : Std_ReturnType  E_OK
*                                    E_NOT_OK
*******************************************************************************/
void PingPong_Start(void)
{
	uint8 i=1,j=2,val=0,x=0,flag=0;
	for (i=1;i<=14;i++)
	{
		for(j=2;j<=4;j++)
		{
			LCD_GOTO(0,i);
			LCD_WriteChar(j);
			_delay_ms(100);
			if ((i==14)&&(j==4))
			{
				for (x=0;x<10;x++)
				{
					val=GET_BUTTON(Button_2);
					if (val==0)
					{
						LCD_GOTO(0,15);
						LCD_WriteChar(6);
						_delay_ms(100);
						LCD_GOTO(0,15);
						LCD_WriteChar(1);
						flag=1;
						break;
					}
				}
				if (flag==0)
				{
					BUZ_SetValue(PIN_HIGH);
					_delay_ms(1000);
					BUZ_SetValue(PIN_LOW);
					LCD_GOTO(0,3);
					LCD_Write_String("Game Over");
					while(1)
					{
						val=GET_BUTTON(Button_1);
						if (val==0)
						{
							break;
						}
					}
				}
				
			}
			LCD_GOTO(0,i);
			LCD_WriteChar(7);
		}
	}
	flag=0;
	for (i=14;i>=1;i--)
	{
		for(j=4;j>=2;j--)
		{
			LCD_GOTO(0,i);
			LCD_WriteChar(j);
			_delay_ms(100);
			if ((i==1)&&(j==2))
			{
				for (x=0;x<10;x++)
				{
					val=GET_BUTTON(Button_0);
					if (val==0)
					{
						LCD_GOTO(0,0);
						LCD_WriteChar(5);
						_delay_ms(100);
						LCD_GOTO(0,0);
						LCD_WriteChar(0);
						flag=1;
						break;
					}
				}
				if (flag==0)
				{
					BUZ_SetValue(PIN_HIGH);
					_delay_ms(1000);
					BUZ_SetValue(PIN_LOW);
					LCD_GOTO(0,3);
					LCD_Write_String("Game Over");
					while(1)
					{
						val=GET_BUTTON(Button_1);
						if (val==0)
						{
							break;
						}
					}
				}
				
			}
			LCD_GOTO(0,i);
			LCD_WriteChar(7);
		}
	}
}
/**********************************************************************************************************************
 *  END OF FILE: FileName.c
 *********************************************************************************************************************/